{% extends "layout.html" %}

{% block title %}
  Home
{% endblock %}

{% block head %}
    <!--Leaflet css-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css"
    integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ=="
    crossorigin=""/>
    <!-- Leaflet js: Make sure you put this AFTER Leaflet's CSS -->
    <script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"
    integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ=="
    crossorigin=""></script>
{% endblock %}

{% block main %}
  <div id="map"></div>

  <script>
    // initialize the map
    var map = L.map('map').fitWorld();

    // load a tile layer
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);
    
    var popup = L.popup();

    function onMapClick(e) {
    popup
        .setLatLng(e.latlng)
        .setContent("You clicked the map at " + e.latlng.toString())
        .openOn(map);
    }
    map.on('click', onMapClick);

    var circle = L.circle([-6.141237, 107.077354], {
      color: 'red',
      fillColor: '#f03',
      fillOpacity: 0.5,
      radius: 2000
    }).addTo(map);
    circle.bindPopup("Daerah Berbahaya");
    
    var statesData = {"type":"FeatureCollection","features":[
      {"type":"Feature",
      "id":"01",
      "properties":{"name":"Cengkareng","crimeRate":94.65},
      "geometry":{"type":"Polygon","coordinates":[[[106.703699999999998,-6.178593],[106.705482200000006,-6.1775944],[106.706901599999995,-6.1767991],[106.706840400000004,-6.1756454],[106.706866300000002,-6.1742231],[106.708622899999995,-6.1742741],[106.709649799999994,-6.174304],[106.710190299999994,-6.1743623],[106.710661000000002,-6.1743763],[106.710705799999999,-6.173804],[106.710781400000002,-6.1734027],[106.710817000000006,-6.173249],[106.711205000000007,-6.172591],[106.711809000000002,-6.171818],[106.712495200000006,-6.1716327],[106.712915800000005,-6.1704702],[106.713472499999995,-6.1689085],[106.713612999999995,-6.168535],[106.713611299999997,-6.1683006],[106.713757999999999,-6.167871],[106.714527000000004,-6.167297],[106.715205999999995,-6.166872],[106.716492000000002,-6.166067],[106.716713200000001,-6.1655817],[106.716667000000001,-6.1652327],[106.716503000000003,-6.163847],[106.716570899999994,-6.1638357],[106.716514399999994,-6.1634865],[106.716552199999995,-6.1633332],[106.716656700000001,-6.1631319],[106.7167326,-6.1629499],[106.716769799999994,-6.1626339],[106.716750099999999,-6.162433],[106.716061800000006,-6.1624735],[106.715354000000005,-6.1624184],[106.715367999999998,-6.160332],[106.715430999999995,-6.159829],[106.715301299999993,-6.1597821],[106.715169799999998,-6.1597706],[106.7152265,-6.1588254],[106.715280100000001,-6.1587594],[106.715279499999994,-6.158556],[106.715234699999996,-6.1581794],[106.715143800000007,-6.1577849],[106.715239199999999,-6.1577188],[106.715310500000001,-6.1575751],[106.715507900000006,-6.1576342],[106.715658500000004,-6.1577306],[106.715884599999995,-6.1576928],[106.715745499999997,-6.1572028],[106.715654799999996,-6.1569278],[106.715548100000007,-6.1566173],[106.715983699999995,-6.156543],[106.715995399999997,-6.1563288],[106.715945099999999,-6.1558942],[106.715860000000006,-6.155461],[106.715640699999994,-6.1550876],[106.715763999999993,-6.154985],[106.715997999999999,-6.15486],[106.716371100000003,-6.1546342],[106.717516500000002,-6.1539885],[106.718360799999999,-6.153541],[106.718914999999996,-6.15334],[106.718774999999994,-6.152457],[106.718683999999996,-6.152297],[106.718672999999995,-6.151874],[106.718457099999995,-6.1503625],[106.718203000000003,-6.148301],[106.718192000000002,-6.147941],[106.718108400000006,-6.1469146],[106.718063200000003,-6.146575],[106.717994000000004,-6.145803],[106.717817999999994,-6.145315],[106.717962999999997,-6.144766],[106.717990200000003,-6.1447154],[106.718416000000005,-6.143908],[106.718457999999998,-6.143487],[106.717483000000001,-6.14324],[106.717215600000003,-6.1413722],[106.717122900000007,-6.1406617],[106.717020000000005,-6.14007],[106.716915,-6.13939],[106.716776999999993,-6.139007],[106.716637000000006,-6.138608],[106.716651900000002,-6.1383541],[106.716651200000001,-6.1378306],[106.716648800000002,-6.137536],[106.716646400000002,-6.1372419],[106.716647300000005,-6.1367696],[106.716667000000001,-6.1361517],[106.716605400000006,-6.133612],[106.717855999999998,-6.1324212],[106.717733699999997,-6.1322758],[106.717552299999994,-6.1320604],[106.716606200000001,-6.1310065],[106.717017400000003,-6.1306604],[106.717247099999994,-6.130479],[106.717433700000001,-6.1303695],[106.717737600000007,-6.1300903],[106.718070800000007,-6.1299362],[106.718161600000002,-6.1299079],[106.718439599999996,-6.1296871],[106.718581599999993,-6.1295809],[106.718744200000003,-6.1294377],[106.718826899999996,-6.1292317],[106.718999100000005,-6.1290605],[106.719224800000006,-6.1288821],[106.719203800000003,-6.1288564],[106.719089499999995,-6.1286892],[106.719014099999995,-6.1285831],[106.719401199999993,-6.1281012],[106.7199095,-6.1274051],[106.720199699999995,-6.1270102],[106.720477500000001,-6.1267857],[106.720668799999999,-6.1267161],[106.721152000000004,-6.12701],[106.721268899999998,-6.1270045],[106.721608599999996,-6.1268899],[106.721897200000001,-6.1265778],[106.722249300000001,-6.1262805],[106.722495899999998,-6.1260719],[106.723421999999999,-6.12597],[106.724001999999999,-6.126182],[106.724389500000001,-6.1263424],[106.725286400000002,-6.1253926],[106.725778000000005,-6.1250015],[106.726137499999993,-6.1247495],[106.726862199999999,-6.1242416],[106.727136999999999,-6.1240672],[106.727199499999998,-6.1238113],[106.7273225,-6.1239398],[106.727436800000007,-6.1238707],[106.727990599999998,-6.1237223],[106.7283659,-6.1236799],[106.728601900000001,-6.1237197],[106.728599700000004,-6.1236422],[106.728601299999994,-6.1232564],[106.729044200000004,-6.1232621],[106.729837099999997,-6.1227078],[106.7300398,-6.1229174],[106.730326000000005,-6.123228],[106.730592000000001,-6.123339],[106.730751999999995,-6.122954],[106.731026900000003,-6.1225084],[106.731549999999999,-6.121542],[106.733811000000003,-6.1233109],[106.734711799999999,-6.1240156],[106.735115399999998,-6.1243314],[106.735786099999999,-6.1248178],[106.736950100000001,-6.125662],[106.737294599999998,-6.1259119],[106.737409799999995,-6.1259954],[106.737997800000002,-6.1264219],[106.738635000000002,-6.126884],[106.739315300000001,-6.1272493],[106.7401792,-6.1277381],[106.741110000000006,-6.128169],[106.742129399999996,-6.1286438],[106.742838500000005,-6.1289666],[106.743954000000002,-6.129458],[106.7442554,-6.1296586],[106.744946999999996,-6.130121],[106.745487699999998,-6.1304862],[106.745685100000003,-6.1306188],[106.746701400000006,-6.1313451],[106.747081699999995,-6.13155],[106.749019399999995,-6.1329981],[106.749629999999996,-6.133591],[106.749881000000002,-6.13381],[106.750218899999993,-6.1340044],[106.750814899999995,-6.1343591],[106.750973999999999,-6.134439],[106.751431699999998,-6.1346003],[106.752733000000006,-6.135059],[106.753379600000002,-6.1353797],[106.754796400000004,-6.1359626],[106.755659800000004,-6.1363404],[106.756097600000004,-6.1364815],[106.756623599999998,-6.1367247],[106.757603700000004,-6.1370624],[106.758533700000001,-6.1373829],[106.759168399999993,-6.137582],[106.759443200000007,-6.1376964],[106.760090199999993,-6.1379044],[106.760934300000002,-6.1381995],[106.761247600000004,-6.1383091],[106.761506499999996,-6.138414],[106.761802500000002,-6.1385031],[106.762061799999998,-6.138603],[106.763067500000005,-6.1389408],[106.763154700000001,-6.1389715],[106.763394099999999,-6.1390537],[106.763716799999997,-6.1391697],[106.764044799999994,-6.1392766],[106.764697200000001,-6.1394945],[106.765308200000007,-6.1396688],[106.766905899999998,-6.1402331],[106.767081000000005,-6.140295],[106.768168000000003,-6.140628],[106.768313800000001,-6.1406298],[106.7693029,-6.140904],[106.769532799999993,-6.1409227],[106.769970799999996,-6.1409561],[106.770771499999995,-6.1411275],[106.770943099999997,-6.1411599],[106.771344200000001,-6.1412334],[106.771880699999997,-6.1413347],[106.772120999999999,-6.14138],[106.772836100000006,-6.1414465],[106.773236299999994,-6.1414823],[106.774106000000003,-6.1414188],[106.774508999999995,-6.141336],[106.774977000000007,-6.141431],[106.775092299999997,-6.1414937],[106.775576299999997,-6.1417715],[106.775544100000005,-6.1418754],[106.775473099999999,-6.1421299],[106.775405000000006,-6.142374],[106.775454800000006,-6.1429388],[106.775482999999994,-6.143259],[106.775453999999996,-6.14377],[106.775453799999994,-6.1438812],[106.775352600000005,-6.1444244],[106.775223400000002,-6.1453103],[106.774582499999994,-6.1459867],[106.773308799999995,-6.148386],[106.7731584,-6.1486693],[106.772591399999996,-6.1495363],[106.772048400000003,-6.1503113],[106.771561399999996,-6.1511543],[106.771200399999998,-6.1518263],[106.770924199999996,-6.1522625],[106.770891399999996,-6.1523338],[106.770208800000006,-6.153619],[106.769433599999999,-6.1550392],[106.769134600000001,-6.1554883],[106.768984000000003,-6.1557271],[106.768639399999998,-6.1562573],[106.7684639,-6.1565458],[106.768061500000002,-6.1573451],[106.7677896,-6.1578431],[106.767672399999995,-6.1579718],[106.767299800000004,-6.1589358],[106.767239900000007,-6.1590978],[106.767184900000004,-6.1591984],[106.767128299999996,-6.159345],[106.766711999999998,-6.159967],[106.766478800000002,-6.1598447],[106.766058000000001,-6.159818],[106.765513799999994,-6.1596763],[106.765346899999997,-6.1595931],[106.765075699999997,-6.1594425],[106.764855299999994,-6.1593118],[106.764658900000001,-6.1592098],[106.763935000000004,-6.158937],[106.763725699999995,-6.1589154],[106.763479000000004,-6.15889],[106.763113000000004,-6.158849],[106.763052099999996,-6.1588459],[106.762704999999997,-6.158828],[106.7624146,-6.1588213],[106.761747,-6.158806],[106.761535300000006,-6.1587503],[106.761400100000003,-6.1586907],[106.760914600000007,-6.1585294],[106.760774999999995,-6.158483],[106.760328999999999,-6.158687],[106.759671999999995,-6.158833],[106.759416299999998,-6.1591977],[106.758319999999998,-6.158993],[106.756193800000005,-6.1585737],[106.755192800000003,-6.1583552],[106.754735199999999,-6.1582565],[106.753725000000003,-6.158046],[106.752840500000005,-6.1579687],[106.752712299999999,-6.1579411],[106.751806299999998,-6.1579561],[106.750745300000005,-6.1580401],[106.748971299999994,-6.1581991],[106.748729299999994,-6.1582281],[106.748377300000001,-6.1582711],[106.748036299999995,-6.1583081],[106.747715299999996,-6.1583351],[106.747632300000006,-6.1588408],[106.747603699999999,-6.1593614],[106.747565300000005,-6.1600581],[106.747653,-6.1603747],[106.747699299999994,-6.1605421],[106.747735300000002,-6.1607691],[106.747900999999999,-6.1616235],[106.747985299999996,-6.1618061],[106.748170299999998,-6.1627131],[106.748277299999998,-6.1632111],[106.748378299999999,-6.1636811],[106.748629300000005,-6.1645101],[106.748833300000001,-6.1652671],[106.748828000000003,-6.165882],[106.748425999999995,-6.165804],[106.747697000000002,-6.165491],[106.747484600000007,-6.1652718],[106.747150000000005,-6.165381],[106.746926999999999,-6.165211],[106.746881000000002,-6.165082],[106.746773000000005,-6.165007],[106.746549000000002,-6.165107],[106.746483999999995,-6.165297],[106.746548000000004,-6.165469],[106.746797999999998,-6.165696],
      [106.746763999999999,-6.165919],[106.746426999999997,-6.166082],[106.74615,-6.166018],[106.746050999999994,-6.165837],[106.745868000000002,-6.165735],[106.745699999999999,-6.16577],[106.745683,-6.166041],[106.745771000000005,-6.166273],[106.745501000000004,-6.166489],[106.745199,-6.166512],[106.744912999999997,-6.166374],[106.744764000000004,-6.166574],[106.744572000000005,-6.166719],[106.744349999999997,-6.166712],[106.744178000000005,-6.16649],[106.744128000000003,-6.165938],[106.744011999999998,-6.16591],[106.743883999999994,-6.166052],[106.743881999999999,-6.166363],[106.743817000000007,-6.166542],[106.743594000000002,-6.166632],[106.743483999999995,-6.166555],[106.743136000000007,-6.166594],[106.742787000000007,-6.166432],[106.742676000000003,-6.166452],[106.742384000000001,-6.166761],[106.741945999999999,-6.167079],[106.741900000000001,-6.167224],[106.741681999999997,-6.167398],[106.741839999999996,-6.16777],[106.741792000000004,-6.167973],[106.741643999999994,-6.168079],[106.741384999999994,-6.168141],[106.741248999999996,-6.168034],[106.741234000000006,-6.167844],[106.741178000000005,-6.16769],[106.741003000000006,-6.167676],[106.740916999999996,-6.167709],[106.740727000000007,-6.167621],[106.740626000000006,-6.167526],[106.740469000000004,-6.167588],[106.740345000000005,-6.167822],[106.740436000000003,-6.168029],[106.740536000000006,-6.168186],[106.740502000000006,-6.16846],[106.740384000000006,-6.168614],[106.740183999999999,-6.168587],[106.740031000000002,-6.168486],[106.740076000000002,-6.168201],[106.740048000000002,-6.168052],[106.739964000000001,-6.168047],[106.739761000000001,-6.168134],[106.739423000000002,-6.168247],[106.739441999999997,-6.168663],[106.739171999999996,-6.168715],[106.739054999999993,-6.168829],[106.739048999999994,-6.169475],[106.738878,-6.169808],[106.738696000000004,-6.169811],[106.738563999999997,-6.169748],[106.738636999999997,-6.16913],[106.738617000000005,-6.169022],[106.738307000000006,-6.168688],[106.738133000000005,-6.168642],[106.737995999999995,-6.168723],[106.737887999999998,-6.168836],[106.737808000000001,-6.169172],[106.737765999999993,-6.16953],[106.737909000000002,-6.169753],[106.738174999999998,-6.169806],[106.738376000000002,-6.170054],[106.738414000000006,-6.170216],[106.738332,-6.1705],[106.738251000000005,-6.170624],[106.738116000000005,-6.170683],[106.737970000000004,-6.17066],[106.737870000000001,-6.17054],[106.737838999999994,-6.17042],[106.737870000000001,-6.170116],[106.737841000000003,-6.169993],[106.737583000000001,-6.1699],[106.737449999999995,-6.169916],[106.737279999999998,-6.16998],[106.736795999999998,-6.170181],[106.736654000000001,-6.170273],[106.736452,-6.170391],[106.736230000000006,-6.170361],[106.736035000000001,-6.170244],[106.735956000000002,-6.17009],[106.735775000000004,-6.169915],[106.735664,-6.169937],[106.735546999999997,-6.170056],[106.735461000000001,-6.170207],[106.735426000000004,-6.170341],[106.735455999999999,-6.170461],[106.735536999999994,-6.170571],[106.735753000000003,-6.170802],[106.735759999999999,-6.170955],[106.735557,-6.171139],[106.735523999999998,-6.171166],[106.735431000000005,-6.17124],[106.735308000000003,-6.17124],[106.735061000000002,-6.170941],[106.734987000000004,-6.170952],[106.734466999999995,-6.171277],[106.734433999999993,-6.171442],[106.734459999999999,-6.171594],[106.734329000000002,-6.171741],[106.734166000000002,-6.171754],[106.733949999999993,-6.171625],[106.733639999999994,-6.171458],[106.733430999999996,-6.171591],[106.733294000000001,-6.171961],[106.733072000000007,-6.172113],[106.733038399999998,-6.1721356],[106.732871000000003,-6.172248],[106.732709,-6.172443],[106.732620999999995,-6.172648],[106.732585,-6.17271],[106.732425000000006,-6.17271],[106.732232999999994,-6.172676],[106.732065000000006,-6.172796],[106.731932999999998,-6.172957],[106.731842999999998,-6.173558],[106.731699000000006,-6.173837],[106.731748999999994,-6.174],[106.731998000000004,-6.174154],[106.731987000000004,-6.174356],[106.731761000000006,-6.174556],[106.731471999999997,-6.174711],[106.730986000000001,-6.174921],[106.730801999999997,-6.175065],[106.730974000000003,-6.175513],[106.731093999999999,-6.175824],[106.731044999999995,-6.175999],[106.730830999999995,-6.17613],[106.730641000000006,-6.175948],[106.730453999999995,-6.175796],[106.730237000000002,-6.175662],[106.730052000000001,-6.175545],[106.729888000000003,-6.175618],[106.729746000000006,-6.175708],[106.729646000000002,-6.175875],[106.729500000000002,-6.175953],[106.729106000000002,-6.175768],[106.729021000000003,-6.175767],[106.728837999999996,-6.175897],[106.728686999999994,-6.176037],[106.728409299999996,-6.1761758],[106.727683999999996,-6.176715],[106.727818999999997,-6.177099],[106.727790999999996,-6.177337],[106.727546000000004,-6.177749],[106.727354000000005,-6.177683],[106.727289999999996,-6.177455],[106.726826000000003,-6.177324],[106.726646000000002,-6.177547],[106.726641000000001,-6.17802],[106.727000000000004,-6.178266],[106.727102000000002,-6.178525],[106.727079000000003,-6.178763],[106.726892000000007,-6.178979],[106.726590000000002,-6.178947],[106.726089000000002,-6.17854],[106.725976000000003,-6.178509],[106.725470999999999,-6.179444],[106.725250000000003,-6.179721],[106.725286999999994,-6.179855],[106.725401000000005,-6.179927],[106.725701999999998,-6.179858],[106.725853999999998,-6.179954],[106.725871999999995,-6.1803208],[106.725526099999996,-6.1807215],[106.725296999999998,-6.180987],[106.725155000000001,-6.180986],[106.725026999999997,-6.180877],[106.724722,-6.180829],[106.724574000000004,-6.180987],[106.724498999999994,-6.181197],[106.724502999999999,-6.181404],[106.725001000000006,-6.18204],[106.724998999999997,-6.182172],[106.724907999999999,-6.182268],[106.724181000000002,-6.182529],[106.724097999999998,-6.182693],[106.724130000000002,-6.182872],[106.724412999999998,-6.183226],[106.724417700000004,-6.1833541],[106.724438000000006,-6.183602],[106.724341999999993,-6.183872],[106.7239,-6.184007],[106.723624000000001,-6.183728],[106.723364000000004,-6.183694],[106.723207500000001,-6.1838825],[106.722987000000003,-6.184156],[106.722943999999998,-6.184455],[106.7231247,-6.1846814],[106.720642600000005,-6.1841134],[106.718671000000001,-6.183662],[106.717356800000005,-6.1830995],[106.715608000000003,-6.182351],[106.714436500000005,-6.1820622],[106.712463999999997,-6.181576],[106.710708999999994,-6.181],[106.709862999999999,-6.180898],[106.708588700000007,-6.1803955],[106.706977899999998,-6.1797839],[106.703699999999998,-6.178593]]]}}]};
    L.geoJson(statesData).addTo(map);

    function getColor(d) {
    return d > 1000 ? '#800026' :
           d > 500  ? '#BD0026' :
           d > 200  ? '#E31A1C' :
           d > 100  ? '#FC4E2A' :
           d > 50   ? '#FD8D3C' :
           d > 20   ? '#FEB24C' :
           d > 10   ? '#FED976' :
                      '#FFEDA0';
    }

    function style(feature) {
    return {
        fillColor: getColor(feature.properties.density),
        weight: 2,
        opacity: 1,
        color: 'white',
        dashArray: '3',
        fillOpacity: 0.7
      };
    }
    L.geoJson(statesData, {style: style}).addTo(map);

  </script>
{% endblock %}

{% block script %}
{% endblock %}
</body>
</html>
